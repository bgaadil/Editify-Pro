{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91883\\\\Downloads\\\\editify-react\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// Full-featured Image Editor with All Tools, Polished UI, Theme Toggle, and Background Remover\nimport React, { useRef, useState, useEffect } from \"react\";\nimport perspective from \"perspective-transform\";\nimport { motion } from \"framer-motion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const canvasRef = useRef(null);\n  const CANVAS_WIDTH = 800;\n  const CANVAS_HEIGHT = 600;\n  const [imageSrc, setImageSrc] = useState(null);\n  const [imageSize, setImageSize] = useState({\n    width: 0,\n    height: 0\n  });\n  const [drawOffset, setDrawOffset] = useState({\n    x: 0,\n    y: 0\n  });\n  const [dimensions, setDimensions] = useState({\n    width: \"\",\n    height: \"\"\n  });\n  const [showResize, setShowResize] = useState(false);\n  const [isCropping, setIsCropping] = useState(false);\n  const [cropPoints, setCropPoints] = useState([]);\n  const [draggingPoint, setDraggingPoint] = useState(null);\n  const [textInputs, setTextInputs] = useState([]);\n  const [currentText, setCurrentText] = useState(\"\");\n  const [isAddingText, setIsAddingText] = useState(false);\n  const [history, setHistory] = useState([]);\n  const [redoHistory, setRedoHistory] = useState([]);\n  const [darkMode, setDarkMode] = useState(false);\n  const saveToHistory = () => {\n    const canvas = canvasRef.current;\n    const data = canvas.toDataURL();\n    setHistory(prev => [...prev, data]);\n    setRedoHistory([]);\n  };\n  const handleUpload = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = event => {\n      const img = new Image();\n      img.onload = () => {\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext(\"2d\");\n        const widthRatio = CANVAS_WIDTH / img.width;\n        const heightRatio = CANVAS_HEIGHT / img.height;\n        const scale = Math.min(widthRatio, heightRatio);\n        const newWidth = img.width * scale;\n        const newHeight = img.height * scale;\n        const offsetX = (CANVAS_WIDTH - newWidth) / 2;\n        const offsetY = (CANVAS_HEIGHT - newHeight) / 2;\n        canvas.width = CANVAS_WIDTH;\n        canvas.height = CANVAS_HEIGHT;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, offsetX, offsetY, newWidth, newHeight);\n        setImageSrc(event.target.result);\n        setImageSize({\n          width: newWidth,\n          height: newHeight\n        });\n        setDrawOffset({\n          x: offsetX,\n          y: offsetY\n        });\n        setDimensions({\n          width: newWidth,\n          height: newHeight\n        });\n        setCropPoints([{\n          x: offsetX + 20,\n          y: offsetY + 20\n        }, {\n          x: offsetX + newWidth - 20,\n          y: offsetY + 20\n        }, {\n          x: offsetX + newWidth - 20,\n          y: offsetY + newHeight - 20\n        }, {\n          x: offsetX + 20,\n          y: offsetY + newHeight - 20\n        }]);\n        saveToHistory();\n      };\n      img.src = event.target.result;\n    };\n    reader.readAsDataURL(file);\n  };\n  const redrawCanvas = () => {\n    if (!imageSrc) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, drawOffset.x, drawOffset.y, imageSize.width, imageSize.height);\n      textInputs.forEach(({\n        text,\n        x,\n        y\n      }) => {\n        ctx.font = \"20px Arial\";\n        ctx.fillStyle = \"black\";\n        ctx.fillText(text, x, y);\n      });\n      if (isCropping && cropPoints.length === 4) {\n        ctx.strokeStyle = \"red\";\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.moveTo(cropPoints[0].x, cropPoints[0].y);\n        for (let i = 1; i < 4; i++) {\n          ctx.lineTo(cropPoints[i].x, cropPoints[i].y);\n        }\n        ctx.closePath();\n        ctx.stroke();\n        cropPoints.forEach(pt => {\n          ctx.fillStyle = \"blue\";\n          ctx.beginPath();\n          ctx.arc(pt.x, pt.y, 6, 0, 2 * Math.PI);\n          ctx.fill();\n        });\n      }\n    };\n    img.src = imageSrc;\n  };\n  useEffect(() => {\n    redrawCanvas();\n  }, [imageSrc, cropPoints, isCropping, textInputs]);\n  const handleMouseDown = e => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    if (isAddingText) {\n      setTextInputs([...textInputs, {\n        text: currentText,\n        x,\n        y\n      }]);\n      setIsAddingText(false);\n      setCurrentText(\"\");\n      saveToHistory();\n      return;\n    }\n    if (!isCropping) return;\n    cropPoints.forEach((point, idx) => {\n      const dx = x - point.x;\n      const dy = y - point.y;\n      if (Math.sqrt(dx * dx + dy * dy) < 10) {\n        setDraggingPoint(idx);\n      }\n    });\n  };\n  const handleMouseMove = e => {\n    if (!isCropping || draggingPoint === null) return;\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const updated = [...cropPoints];\n    updated[draggingPoint] = {\n      x,\n      y\n    };\n    setCropPoints(updated);\n  };\n  const handleMouseUp = () => {\n    setDraggingPoint(null);\n  };\n  const handleCrop = () => {\n    if (cropPoints.length !== 4) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const img = new Image();\n    img.onload = () => {\n      const srcCoords = cropPoints.map(pt => [pt.x, pt.y]);\n      const targetSize = 300;\n      const dstCoords = [[0, 0], [targetSize, 0], [targetSize, targetSize], [0, targetSize]];\n      const transform = perspective(srcCoords, dstCoords);\n      const output = document.createElement(\"canvas\");\n      output.width = targetSize;\n      output.height = targetSize;\n      const outCtx = output.getContext(\"2d\");\n      const imageData = outCtx.createImageData(targetSize, targetSize);\n      for (let y = 0; y < targetSize; y++) {\n        for (let x = 0; x < targetSize; x++) {\n          const [sx, sy] = transform.inverse([x, y]);\n          const px = Math.floor(sx);\n          const py = Math.floor(sy);\n          if (px >= 0 && py >= 0 && px < canvas.width && py < canvas.height) {\n            const srcData = ctx.getImageData(px, py, 1, 1).data;\n            const index = (y * targetSize + x) * 4;\n            imageData.data[index] = srcData[0];\n            imageData.data[index + 1] = srcData[1];\n            imageData.data[index + 2] = srcData[2];\n            imageData.data[index + 3] = srcData[3];\n          }\n        }\n      }\n      outCtx.putImageData(imageData, 0, 0);\n      const newSrc = output.toDataURL();\n      setImageSrc(newSrc);\n      setIsCropping(false);\n      setCropPoints([]);\n      saveToHistory();\n    };\n    img.src = imageSrc;\n  };\n  const applyGrayscale = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    for (let i = 0; i < imageData.data.length; i += 4) {\n      const avg = (imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2]) / 3;\n      imageData.data[i] = avg;\n      imageData.data[i + 1] = avg;\n      imageData.data[i + 2] = avg;\n    }\n    ctx.putImageData(imageData, 0, 0);\n    saveToHistory();\n  };\n  const undo = () => {\n    if (history.length === 0) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const last = history[history.length - 1];\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0);\n      setImageSrc(canvas.toDataURL());\n    };\n    img.src = last;\n    setRedoHistory(prev => [...prev, canvas.toDataURL()]);\n    setHistory(prev => prev.slice(0, -1));\n  };\n  const redo = () => {\n    if (redoHistory.length === 0) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const last = redoHistory[redoHistory.length - 1];\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0);\n      setImageSrc(canvas.toDataURL());\n    };\n    img.src = last;\n    setHistory(prev => [...prev, canvas.toDataURL()]);\n    setRedoHistory(prev => prev.slice(0, -1));\n  };\n  const handleDownload = () => {\n    const canvas = canvasRef.current;\n    const url = canvas.toDataURL(\"image/png\");\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.download = \"edited-image.png\";\n    link.click();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: darkMode ? \"dark\" : \"\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-900 dark:to-gray-800 min-h-screen\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"w-80 p-5 bg-white/60 dark:bg-gray-900/60 backdrop-blur-md border-r overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl font-bold text-gray-800 dark:text-white mb-4\",\n          children: \"\\uD83D\\uDD8C\\uFE0F Editify Pro\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"image/*\",\n          onChange: handleUpload,\n          className: \"mb-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowResize(!showResize),\n          className: \"w-full bg-blue-500 text-white py-2 px-4 mb-2 rounded\",\n          children: \"Resize\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), showResize && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"Width\",\n            value: dimensions.width,\n            onChange: e => setDimensions({\n              ...dimensions,\n              width: +e.target.value\n            }),\n            className: \"w-full p-2 border rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            placeholder: \"Height\",\n            value: dimensions.height,\n            onChange: e => setDimensions({\n              ...dimensions,\n              height: +e.target.value\n            }),\n            className: \"w-full p-2 border rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter text\",\n          value: currentText,\n          onChange: e => setCurrentText(e.target.value),\n          className: \"w-full p-2 mb-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsAddingText(true),\n          className: \"w-full py-2 px-4 bg-yellow-600 text-white rounded mb-2\",\n          children: \"Add Text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsCropping(!isCropping),\n          className: \"w-full py-2 px-4 bg-gray-600 text-white rounded mb-2\",\n          children: isCropping ? \"Exit Crop Mode\" : \"Start Crop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this), isCropping && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCrop,\n          className: \"w-full py-2 px-4 bg-red-500 text-white rounded mb-2\",\n          children: \"Apply Crop\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: applyGrayscale,\n          className: \"w-full py-2 px-4 bg-indigo-500 text-white rounded mb-2\",\n          children: \"Grayscale\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: removeBackground,\n          className: \"w-full py-2 px-4 bg-pink-600 text-white rounded mb-2\",\n          children: \"Remove Background\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: undo,\n          className: \"w-full py-2 px-4 bg-gray-500 text-white rounded mb-2\",\n          children: \"Undo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: redo,\n          className: \"w-full py-2 px-4 bg-blue-600 text-white rounded mb-2\",\n          children: \"Redo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDownload,\n          className: \"w-full py-2 px-4 bg-purple-600 text-white rounded mb-2\",\n          children: \"Download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setDarkMode(!darkMode),\n          className: \"w-full py-2 px-4 bg-black text-white rounded\",\n          children: \"Toggle Theme\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-1 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/_jsxDEV(motion.canvas, {\n          ref: canvasRef,\n          width: CANVAS_WIDTH,\n          height: CANVAS_HEIGHT,\n          className: \"rounded-lg border-4 border-white dark:border-gray-700 shadow-xl bg-white dark:bg-gray-900\",\n          onMouseDown: handleMouseDown,\n          onMouseMove: handleMouseMove,\n          onMouseUp: handleMouseUp\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 255,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"fI3bY3YI60B1aIzx5uQT1d7Fv/s=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useRef","useState","useEffect","perspective","motion","jsxDEV","_jsxDEV","App","_s","canvasRef","CANVAS_WIDTH","CANVAS_HEIGHT","imageSrc","setImageSrc","imageSize","setImageSize","width","height","drawOffset","setDrawOffset","x","y","dimensions","setDimensions","showResize","setShowResize","isCropping","setIsCropping","cropPoints","setCropPoints","draggingPoint","setDraggingPoint","textInputs","setTextInputs","currentText","setCurrentText","isAddingText","setIsAddingText","history","setHistory","redoHistory","setRedoHistory","darkMode","setDarkMode","saveToHistory","canvas","current","data","toDataURL","prev","handleUpload","e","file","target","files","reader","FileReader","onload","event","img","Image","ctx","getContext","widthRatio","heightRatio","scale","Math","min","newWidth","newHeight","offsetX","offsetY","clearRect","drawImage","result","src","readAsDataURL","redrawCanvas","forEach","text","font","fillStyle","fillText","length","strokeStyle","lineWidth","beginPath","moveTo","i","lineTo","closePath","stroke","pt","arc","PI","fill","handleMouseDown","rect","getBoundingClientRect","clientX","left","clientY","top","point","idx","dx","dy","sqrt","handleMouseMove","updated","handleMouseUp","handleCrop","srcCoords","map","targetSize","dstCoords","transform","output","document","createElement","outCtx","imageData","createImageData","sx","sy","inverse","px","floor","py","srcData","getImageData","index","putImageData","newSrc","applyGrayscale","avg","undo","last","slice","redo","handleDownload","url","link","href","download","click","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","accept","onChange","onClick","placeholder","value","removeBackground","ref","onMouseDown","onMouseMove","onMouseUp","_c","$RefreshReg$"],"sources":["C:/Users/91883/Downloads/editify-react/src/App.js"],"sourcesContent":["// Full-featured Image Editor with All Tools, Polished UI, Theme Toggle, and Background Remover\nimport React, { useRef, useState, useEffect } from \"react\";\nimport perspective from \"perspective-transform\";\nimport { motion } from \"framer-motion\";\n\nfunction App() {\n  const canvasRef = useRef(null);\n  const CANVAS_WIDTH = 800;\n  const CANVAS_HEIGHT = 600;\n\n  const [imageSrc, setImageSrc] = useState(null);\n  const [imageSize, setImageSize] = useState({ width: 0, height: 0 });\n  const [drawOffset, setDrawOffset] = useState({ x: 0, y: 0 });\n  const [dimensions, setDimensions] = useState({ width: \"\", height: \"\" });\n  const [showResize, setShowResize] = useState(false);\n  const [isCropping, setIsCropping] = useState(false);\n  const [cropPoints, setCropPoints] = useState([]);\n  const [draggingPoint, setDraggingPoint] = useState(null);\n  const [textInputs, setTextInputs] = useState([]);\n  const [currentText, setCurrentText] = useState(\"\");\n  const [isAddingText, setIsAddingText] = useState(false);\n  const [history, setHistory] = useState([]);\n  const [redoHistory, setRedoHistory] = useState([]);\n  const [darkMode, setDarkMode] = useState(false);\n\n  const saveToHistory = () => {\n    const canvas = canvasRef.current;\n    const data = canvas.toDataURL();\n    setHistory((prev) => [...prev, data]);\n    setRedoHistory([]);\n  };\n\n  const handleUpload = (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const reader = new FileReader();\n    reader.onload = (event) => {\n      const img = new Image();\n      img.onload = () => {\n        const canvas = canvasRef.current;\n        const ctx = canvas.getContext(\"2d\");\n\n        const widthRatio = CANVAS_WIDTH / img.width;\n        const heightRatio = CANVAS_HEIGHT / img.height;\n        const scale = Math.min(widthRatio, heightRatio);\n\n        const newWidth = img.width * scale;\n        const newHeight = img.height * scale;\n        const offsetX = (CANVAS_WIDTH - newWidth) / 2;\n        const offsetY = (CANVAS_HEIGHT - newHeight) / 2;\n\n        canvas.width = CANVAS_WIDTH;\n        canvas.height = CANVAS_HEIGHT;\n\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, offsetX, offsetY, newWidth, newHeight);\n\n        setImageSrc(event.target.result);\n        setImageSize({ width: newWidth, height: newHeight });\n        setDrawOffset({ x: offsetX, y: offsetY });\n        setDimensions({ width: newWidth, height: newHeight });\n        setCropPoints([\n          { x: offsetX + 20, y: offsetY + 20 },\n          { x: offsetX + newWidth - 20, y: offsetY + 20 },\n          { x: offsetX + newWidth - 20, y: offsetY + newHeight - 20 },\n          { x: offsetX + 20, y: offsetY + newHeight - 20 },\n        ]);\n        saveToHistory();\n      };\n      img.src = event.target.result;\n    };\n    reader.readAsDataURL(file);\n  };\n\n  const redrawCanvas = () => {\n    if (!imageSrc) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, drawOffset.x, drawOffset.y, imageSize.width, imageSize.height);\n\n      textInputs.forEach(({ text, x, y }) => {\n        ctx.font = \"20px Arial\";\n        ctx.fillStyle = \"black\";\n        ctx.fillText(text, x, y);\n      });\n\n      if (isCropping && cropPoints.length === 4) {\n        ctx.strokeStyle = \"red\";\n        ctx.lineWidth = 2;\n        ctx.beginPath();\n        ctx.moveTo(cropPoints[0].x, cropPoints[0].y);\n        for (let i = 1; i < 4; i++) {\n          ctx.lineTo(cropPoints[i].x, cropPoints[i].y);\n        }\n        ctx.closePath();\n        ctx.stroke();\n\n        cropPoints.forEach((pt) => {\n          ctx.fillStyle = \"blue\";\n          ctx.beginPath();\n          ctx.arc(pt.x, pt.y, 6, 0, 2 * Math.PI);\n          ctx.fill();\n        });\n      }\n    };\n    img.src = imageSrc;\n  };\n\n  useEffect(() => {\n    redrawCanvas();\n  }, [imageSrc, cropPoints, isCropping, textInputs]);\n\n  const handleMouseDown = (e) => {\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n\n    if (isAddingText) {\n      setTextInputs([...textInputs, { text: currentText, x, y }]);\n      setIsAddingText(false);\n      setCurrentText(\"\");\n      saveToHistory();\n      return;\n    }\n\n    if (!isCropping) return;\n    cropPoints.forEach((point, idx) => {\n      const dx = x - point.x;\n      const dy = y - point.y;\n      if (Math.sqrt(dx * dx + dy * dy) < 10) {\n        setDraggingPoint(idx);\n      }\n    });\n  };\n\n  const handleMouseMove = (e) => {\n    if (!isCropping || draggingPoint === null) return;\n    const rect = canvasRef.current.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const y = e.clientY - rect.top;\n    const updated = [...cropPoints];\n    updated[draggingPoint] = { x, y };\n    setCropPoints(updated);\n  };\n\n  const handleMouseUp = () => {\n    setDraggingPoint(null);\n  };\n\n  const handleCrop = () => {\n    if (cropPoints.length !== 4) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const img = new Image();\n    img.onload = () => {\n      const srcCoords = cropPoints.map((pt) => [pt.x, pt.y]);\n      const targetSize = 300;\n      const dstCoords = [\n        [0, 0],\n        [targetSize, 0],\n        [targetSize, targetSize],\n        [0, targetSize],\n      ];\n      const transform = perspective(srcCoords, dstCoords);\n      const output = document.createElement(\"canvas\");\n      output.width = targetSize;\n      output.height = targetSize;\n      const outCtx = output.getContext(\"2d\");\n      const imageData = outCtx.createImageData(targetSize, targetSize);\n      for (let y = 0; y < targetSize; y++) {\n        for (let x = 0; x < targetSize; x++) {\n          const [sx, sy] = transform.inverse([x, y]);\n          const px = Math.floor(sx);\n          const py = Math.floor(sy);\n          if (px >= 0 && py >= 0 && px < canvas.width && py < canvas.height) {\n            const srcData = ctx.getImageData(px, py, 1, 1).data;\n            const index = (y * targetSize + x) * 4;\n            imageData.data[index] = srcData[0];\n            imageData.data[index + 1] = srcData[1];\n            imageData.data[index + 2] = srcData[2];\n            imageData.data[index + 3] = srcData[3];\n          }\n        }\n      }\n      outCtx.putImageData(imageData, 0, 0);\n      const newSrc = output.toDataURL();\n      setImageSrc(newSrc);\n      setIsCropping(false);\n      setCropPoints([]);\n      saveToHistory();\n    };\n    img.src = imageSrc;\n  };\n\n  const applyGrayscale = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    for (let i = 0; i < imageData.data.length; i += 4) {\n      const avg = (imageData.data[i] + imageData.data[i + 1] + imageData.data[i + 2]) / 3;\n      imageData.data[i] = avg;\n      imageData.data[i + 1] = avg;\n      imageData.data[i + 2] = avg;\n    }\n    ctx.putImageData(imageData, 0, 0);\n    saveToHistory();\n  };\n\n  const undo = () => {\n    if (history.length === 0) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const last = history[history.length - 1];\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0);\n      setImageSrc(canvas.toDataURL());\n    };\n    img.src = last;\n    setRedoHistory((prev) => [...prev, canvas.toDataURL()]);\n    setHistory((prev) => prev.slice(0, -1));\n  };\n\n  const redo = () => {\n    if (redoHistory.length === 0) return;\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    const last = redoHistory[redoHistory.length - 1];\n    const img = new Image();\n    img.onload = () => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      ctx.drawImage(img, 0, 0);\n      setImageSrc(canvas.toDataURL());\n    };\n    img.src = last;\n    setHistory((prev) => [...prev, canvas.toDataURL()]);\n    setRedoHistory((prev) => prev.slice(0, -1));\n  };\n\n  const handleDownload = () => {\n    const canvas = canvasRef.current;\n    const url = canvas.toDataURL(\"image/png\");\n    const link = document.createElement(\"a\");\n    link.href = url;\n    link.download = \"edited-image.png\";\n    link.click();\n  };\n\n  return (\n    <div className={darkMode ? \"dark\" : \"\"}>\n      <div className=\"flex bg-gradient-to-br from-gray-100 to-gray-300 dark:from-gray-900 dark:to-gray-800 min-h-screen\">\n        <aside className=\"w-80 p-5 bg-white/60 dark:bg-gray-900/60 backdrop-blur-md border-r overflow-y-auto\">\n          <h1 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-4\">🖌️ Editify Pro</h1>\n          <input type=\"file\" accept=\"image/*\" onChange={handleUpload} className=\"mb-3\" />\n          <button onClick={() => setShowResize(!showResize)} className=\"w-full bg-blue-500 text-white py-2 px-4 mb-2 rounded\">Resize</button>\n          {showResize && (\n            <div className=\"space-y-2 mb-4\">\n              <input type=\"number\" placeholder=\"Width\" value={dimensions.width} onChange={(e) => setDimensions({ ...dimensions, width: +e.target.value })} className=\"w-full p-2 border rounded\" />\n              <input type=\"number\" placeholder=\"Height\" value={dimensions.height} onChange={(e) => setDimensions({ ...dimensions, height: +e.target.value })} className=\"w-full p-2 border rounded\" />\n            </div>\n          )}\n          <input type=\"text\" placeholder=\"Enter text\" value={currentText} onChange={(e) => setCurrentText(e.target.value)} className=\"w-full p-2 mb-2 border rounded\" />\n          <button onClick={() => setIsAddingText(true)} className=\"w-full py-2 px-4 bg-yellow-600 text-white rounded mb-2\">Add Text</button>\n          <button onClick={() => setIsCropping(!isCropping)} className=\"w-full py-2 px-4 bg-gray-600 text-white rounded mb-2\">{isCropping ? \"Exit Crop Mode\" : \"Start Crop\"}</button>\n          {isCropping && <button onClick={handleCrop} className=\"w-full py-2 px-4 bg-red-500 text-white rounded mb-2\">Apply Crop</button>}\n          <button onClick={applyGrayscale} className=\"w-full py-2 px-4 bg-indigo-500 text-white rounded mb-2\">Grayscale</button>\n          <button onClick={removeBackground} className=\"w-full py-2 px-4 bg-pink-600 text-white rounded mb-2\">Remove Background</button>\n          <button onClick={undo} className=\"w-full py-2 px-4 bg-gray-500 text-white rounded mb-2\">Undo</button>\n          <button onClick={redo} className=\"w-full py-2 px-4 bg-blue-600 text-white rounded mb-2\">Redo</button>\n          <button onClick={handleDownload} className=\"w-full py-2 px-4 bg-purple-600 text-white rounded mb-2\">Download</button>\n          <button onClick={() => setDarkMode(!darkMode)} className=\"w-full py-2 px-4 bg-black text-white rounded\">Toggle Theme</button>\n        </aside>\n\n        <main className=\"flex-1 flex items-center justify-center p-4\">\n          <motion.canvas\n            ref={canvasRef}\n            width={CANVAS_WIDTH}\n            height={CANVAS_HEIGHT}\n            className=\"rounded-lg border-4 border-white dark:border-gray-700 shadow-xl bg-white dark:bg-gray-900\"\n            onMouseDown={handleMouseDown}\n            onMouseMove={handleMouseMove}\n            onMouseUp={handleMouseUp}\n          />\n        </main>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}